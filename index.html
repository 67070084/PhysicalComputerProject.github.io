<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OIIA Spinner Project</title>
  <style>
    body {
      font-family: "Sarabun", sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
      line-height: 1.7;
      color: #333;
    }
    header {
      background-color: #0078D7;
      color: white;
      padding: 25px;
      text-align: center;
    }
    section {
      max-width: 900px;
      margin: 40px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #0078D7;
      border-bottom: 2px solid #0078D7;
      padding-bottom: 5px;
    }
    ul {
      list-style: disc;
      margin-left: 20px;
    }
    li {
      margin-bottom: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #e9ecef;
    }
    footer {
      text-align: center;
      padding: 20px;
      color: #555;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <header>
    <h1>OIIA Spinner</h1>
    <p>ระบบควบคุมแมวหมุนผ่าน Wi-Fi ด้วย Arduino UNO R4 WiFi</p>
  </header>

  <section>
    <h2>1. ชื่อโปรเจกต์</h2>
    <p><strong>OIIA Spinner</strong></p>
  </section>

  <section>
    <h2>2. ทำอะไรมา</h2>
    <p><strong>1. ฝั่ง Arduino:</strong></p>
    <ul>
      <li>ใช้บอร์ด Arduino ที่มี WiFi (เช่น Uno R4 WiFi)</li>
      <li>เขียนโค้ดเชื่อมต่อ WiFi ด้วยไลบรารี <code>WiFiS3.h</code></li>
      <li>สร้าง Web Server บนพอร์ต 80</li>
      <li>เขียนระบบตอบสนองคำสั่ง <code>/status</code> เพื่อส่งสถานะปุ่มจริง 4 ปุ่ม (Run, Stop, Speed, Reset) กลับไปในรูปแบบ JSON</li>
      <li>ส่งหน้าเว็บ HTML ให้ผู้ใช้เมื่อมีการเข้าผ่าน IP ของบอร์ด</li>
    </ul>

    <p><strong>2. ฝั่งเว็บ (หน้า HTML):</strong></p>
    <ul>
      <li>เขียนในไฟล์ <code>webpage.h</code> โดยเก็บ HTML, CSS, และ JavaScript ไว้ในตัวแปร <code>INDEX_HTML</code></li>
      <li>หน้าเว็บมีวิดีโอแมวหมุน พร้อมตัวจับเวลาและปุ่มควบคุม 4 ปุ่ม</li>
      <li>ใช้ JavaScript สั่งเล่น/หยุดวิดีโอ และเร่งความเร็ว</li>
      <li>มีฟังก์ชัน <code>fetch("/status")</code> เรียกดูสถานะปุ่มจริงจาก Arduino ทุก 0.5 วินาที เพื่อให้ปุ่มจริงและปุ่มบนเว็บทำงานร่วมกันได้</li>
    </ul>
  </section>

  <section>
    <h2>3. อุปสรรคที่พบ และวิธีแก้ไข</h2>
    <ul>
      <li><strong>ปัญหา:</strong> WiFi ต่อไม่ติด / เว็บเข้าไม่ได้<br>
          <strong>แก้ไข:</strong> ตรวจสอบ SSID และรหัสผ่าน รวมถึงรอจนสถานะ <code>WL_CONNECTED</code> จริงก่อนเริ่มเซิร์ฟเวอร์</li>

      <li><strong>ปัญหา:</strong> หน้าเว็บโหลดไม่ขึ้นหรือว่างเปล่า<br>
          <strong>แก้ไข:</strong> เพิ่มการส่ง header HTTP ครบ (<code>HTTP/1.1 200 OK, Content-Type</code>)</li>

      <li><strong>ปัญหา:</strong> กดปุ่มแล้วเว็บไม่ตอบสนอง<br>
          <strong>แก้ไข:</strong> พบว่า fetch ไม่ได้รับ JSON เพราะ Arduino ตอบไม่ครบ ต้องเช็กว่า <code>client.flush()</code> และ <code>client.stop()</code> อยู่ตำแหน่งถูก</li>

      <li><strong>ปัญหา:</strong> ปุ่มกดไม่ตอบสนอง<br>
          <strong>แก้ไข:</strong> เพิ่ม <code>pinMode()</code> ของทุกปุ่มให้ถูกต้อง และตรวจสอบการ debounce</li>

      <li><strong>ปัญหา:</strong> ความเร็วการตอบสนองช้า<br>
          <strong>แก้ไข:</strong> ลด <code>delay</code> และเพิ่มการตรวจสอบสถานะภายใน loop</li>

      <li><strong>ปัญหา:</strong> ควบคุม GIF ไม่ได้<br>
          <strong>แก้ไข:</strong> เปลี่ยนจาก GIF เป็นวิดีโอแทน</li>

      <li><strong>ปัญหา:</strong> วิดีโอใหญ่เกินอัปโหลดขึ้นบอร์ดไม่ได้<br>
          <strong>แก้ไข:</strong> อัปโหลดวิดีโอขึ้น GitHub แล้วใช้ URL ดึงมาแสดงบนหน้าเว็บ</li>
    </ul>
  </section>

  <section>
    <h2>4. ผลลัพธ์ที่ได้ตอนนี้</h2>
    <ul>
      <li>✅ สามารถควบคุมการหมุนของแมวที่น่ารักของเราด้วยทั้งปุ่มบนบอร์ดและปุ่มบนหน้าเว็บ</li>
      <li>✅ ปุ่มจริงบนบอร์ดสามารถสั่งงานได้เหมือนกับปุ่มบนเว็บ</li>
      <li>✅ มีการอัปเดตสถานะระหว่าง Arduino และเว็บแบบเรียลไทม์ผ่าน WiFi</li>
      <li>✅ มีระบบรีเซ็ตและปรับความเร็ว</li>
    </ul>
  </section>

  <section>
    <h2>5. ยังทำอะไรไม่ได้บ้าง</h2>
    <ul>
      <li>ยังไม่สามารถเชื่อมต่อกับเครือข่ายที่มีการเข้ารหัสซับซ้อน เช่น WiFi_UFO ของมหาวิทยาลัย</li>
    </ul>
  </section>

  <section>
    <h2>6. บทบาทของสมาชิกในโครงงาน</h2>
    <table>
      <tr><th>รหัสนักศึกษา</th><th>ชื่อ - สกุล</th><th>หน้าที่</th></tr>
      <tr><td>67070036</td><td>นายชัชพิสิฐ บุนนาค</td><td>พัฒนาโค้ด Arduino และระบบเชื่อมต่อ Wi-Fi</td></tr>
      <tr><td>67070084</td><td>นายธีรัตม์ สถาพรวณิชย์</td><td>ออกแบบหน้าเว็บและเชื่อมต่อกับ Web Server</td></tr>
      <tr><td>67070128</td><td>นายภาคภูมิ นพเก้า</td><td>ทดสอบระบบและแก้ไขปัญหาระหว่างการพัฒนา</td></tr>
    </table>
  </section>

  <footer>
    จัดทำโดย นักศึกษามหาวิทยาลัยพระจอมเกล้าลาดกระบัง<br>
    © 2025 OIIA Spinner Project
  </footer>

</body>
</html>
